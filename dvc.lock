schema: '2.0'
stages:
  data_ingestion:
    cmd: python -m src.ingestion
    deps:
    - path: src/ingestion.py
      hash: md5
      md5: dd08ef77eb841f0bf76cd89e5f5f56bc
      size: 2501
    params:
      params.yaml:
        dataset:
          url:
            https://raw.githubusercontent.com/Himanshu-1703/reddit-sentiment-analysis/refs/heads/main/data/reddit.csv
          rename_columns:
            clean_comment: text
            category: target
          train_size: 0.75
          target_labels:
          - neg
          - neu
          - pos
        ingestion:
          processed_train_path: data/processed/train.parquet
          processed_test_path: data/processed/test.parquet
    outs:
    - path: data/processed/test.parquet
      hash: md5
      md5: b59e6dbce031d40ae776b7540775d3d2
      size: 651415
    - path: data/processed/train.parquet
      hash: md5
      md5: d0f05f0713cd9c610574593ac8f67d58
      size: 1966155
  model_building:
    cmd: python -m src.building
    deps:
    - path: data/processed/train.parquet
      hash: md5
      md5: d0f05f0713cd9c610574593ac8f67d58
      size: 1966155
    - path: src/building.py
      hash: md5
      md5: 80df76a5cab540de8071ae9b21d4ea8d
      size: 2715
    params:
      params.yaml:
        building.model:
          module: sklearn.ensemble
          name: HistGradientBoostingClassifier
          path: models/classifier.pkl
          params: {}
        building.vectorizer:
          module: sklearn.feature_extraction.text
          name: TfidfVectorizer
          params:
            max_features: 5000
    outs:
    - path: models/classifier.pkl
      hash: md5
      md5: 01f6e1ae5b3bf4de101923743ed3bf10
      size: 3682212
  model_evaluation:
    cmd: python -m src.evaluation
    deps:
    - path: data/processed/test.parquet
      hash: md5
      md5: b59e6dbce031d40ae776b7540775d3d2
      size: 651415
    - path: models/classifier.pkl
      hash: md5
      md5: 01f6e1ae5b3bf4de101923743ed3bf10
      size: 3682212
    - path: src/evaluation.py
      hash: md5
      md5: 2e92241eb0dac64b8002d0d369bb8995
      size: 5003
    params:
      params.yaml:
        evaluation:
          train_vec_path: models/train_vec_data.pkl
        mlflow:
          tracking_uri: ./mlruns
          experiment_name: exp1-arv-testing
    outs:
    - path: mlflow_run_info.json
      hash: md5
      md5: 8b189988501cbc32acd54b9724377eef
      size: 75
